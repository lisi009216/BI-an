<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="枢轴监控" />
    <meta name="theme-color" content="#181A20" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="apple-touch-icon" href="/static/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16.png" />
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600;700&family=Orbitron:wght@500;600;700&display=swap"
        rel="stylesheet" />
    <title>枢轴监控</title>
    <!-- Clusterize.js for virtual scrolling -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/clusterize.js/0.19.0/clusterize.min.css" />
    <link rel="stylesheet" href="/static/app.css" />


</head>

<body>
    <!-- 固定头部 -->
    <div class="header-area">
        <header>
            <div class="title" data-i18n="app_title">枢轴监控</div>
            <input id="symbol" type="text" class="header-search" placeholder="币种"
                data-i18n-placeholder="placeholder_symbol" />
            <select id="langSelect" class="header-lang">
                <option value="zh" data-i18n="lang_zh">中文</option>
                <option value="en" data-i18n="lang_en">英文</option>
            </select>
            <div class="runtime-stats" id="runtimeStats" title="点击刷新" data-i18n-title="title_click_refresh">
                <span class="stat"><span class="stat-label">G</span><span id="rtGoroutines">-</span></span>
                <span class="stat"><span class="stat-label">K</span><span id="rtKlines">-</span></span>
                <span class="stat"><span class="stat-label">S</span><span id="rtSignals">-</span></span>
                <span class="stat"><span class="stat-label">M</span><span id="rtHeap">-</span></span>
            </div>
            <label class="header-sound-toggle" title="声音提醒" data-i18n-title="title_sound_alert">
                <input type="checkbox" id="soundEnabled" checked />
                <span class="sound-icon">🔔</span>
            </label>
            <span id="status" class="pill" data-i18n="status_disconnected">未连接</span>
            <span id="pendingBadge" class="pending-badge" style="display:none">-</span>
            <button id="filterToggle" type="button" class="filter-toggle" data-i18n="btn_filter_short"
                data-i18n-title="btn_filter_collapse" aria-expanded="true">筛选</button>
            <button id="refresh" type="button" data-i18n="btn_refresh">刷新</button>
        </header>
        <div id="filterSection" class="filter-section">
            <div class="pivot-status">
                <div class="row">
                    <div><strong data-i18n="label_daily">日</strong>: <span id="dailyStatus">-</span></div>
                    <div><strong data-i18n="label_weekly">周</strong>: <span id="weeklyStatus">-</span></div>
                </div>
            </div>
            <div class="controls">
                <div class="row">
                    <select id="period">
                        <option value="" data-i18n="option_all">全部</option>
                        <option value="1d">1d</option>
                        <option value="1w">1w</option>
                    </select>
                    <select id="direction">
                        <option value="" data-i18n="option_all">全部</option>
                        <option value="up" data-i18n="option_up">上涨</option>
                        <option value="down" data-i18n="option_down">下跌</option>
                    </select>
                    <select id="limit">
                        <option value="500">500</option>
                        <option value="1000" selected>1000</option>
                        <option value="2000">2000</option>
                        <option value="5000">5000</option>
                        <option value="10000">10000</option>
                    </select>
                    <input id="minDiff" type="number" class="input-sm" placeholder="差值%"
                        data-i18n-placeholder="placeholder_diff" min="0" step="0.1" />
                    <div class="volume-filter">
                        <input id="minVolume" type="number" class="input-sm" placeholder="成交额"
                            data-i18n-placeholder="placeholder_vol" min="0" step="1" />
                        <select id="volumeUnit" class="select-sm">
                            <option value="M" selected>M</option>
                            <option value="K">K</option>
                            <option value="B">B</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <span style="font-size:11px;color:var(--text-secondary)" data-i18n="label_levels">点位</span>
                    <div class="level-btns" id="filterLevels">
                        <button type="button" data-level="PP">PP</button>
                        <button type="button" data-level="R1">R1</button>
                        <button type="button" data-level="R2">R2</button>
                        <button type="button" data-level="R3">R3</button>
                        <button type="button" data-level="R4">R4</button>
                        <button type="button" data-level="R5">R5</button>
                        <button type="button" data-level="S1">S1</button>
                        <button type="button" data-level="S2">S2</button>
                        <button type="button" data-level="S3">S3</button>
                        <button type="button" data-level="S4">S4</button>
                        <button type="button" data-level="S5">S5</button>
                    </div>
                </div>
                <div class="row">
                    <span style="font-size:11px;color:var(--text-secondary)" data-i18n="label_sound">提示音</span>
                    <div class="level-btns" id="soundLevels">
                        <button type="button" data-level="PP">PP</button>
                        <button type="button" data-level="R1">R1</button>
                        <button type="button" data-level="R2">R2</button>
                        <button type="button" data-level="R3">R3</button>
                        <button type="button" data-level="R4">R4</button>
                        <button type="button" data-level="R5">R5</button>
                        <button type="button" data-level="S1">S1</button>
                        <button type="button" data-level="S2">S2</button>
                        <button type="button" data-level="S3">S3</button>
                        <button type="button" data-level="S4">S4</button>
                        <button type="button" data-level="S5">S5</button>
                    </div>
                </div>
            </div>
            <!-- Pattern filters (hidden by default) -->
            <div id="patternFilters" class="row" style="margin-top:6px;display:none">
                <select id="patternType">
                    <option value="" data-i18n="pattern_all">全部形态</option>
                    <optgroup label="高效率 (A/B)" data-i18n-label="pattern_efficiency_high">
                        <option value="engulfing">吞没形态 (67%)</option>
                        <option value="morning_star">晨星 (70%)</option>
                        <option value="evening_star">暮星 (72%)</option>
                        <option value="three_black">三只乌鸦 (78%)</option>
                        <option value="dark_cloud_cover">乌云盖顶 (70%)</option>
                        <option value="hammer">锤子线 (60%)</option>
                        <option value="shooting_star">流星线 (62%)</option>
                    </optgroup>
                    <optgroup label="中效率 (C/D)" data-i18n-label="pattern_efficiency_medium">
                        <option value="three_white">三白兵 (82%)</option>
                        <option value="harami">孕线 (53%)</option>
                        <option value="doji">十字星 (57%)</option>
                    </optgroup>
                </select>
                <select id="efficiencyRank">
                    <option value="" data-i18n="pattern_rank_all">全部等级</option>
                    <option value="A" data-i18n="pattern_rank_a">A (最高)</option>
                    <option value="B" data-i18n="pattern_rank_b">B (较高)</option>
                    <option value="C" data-i18n="pattern_rank_c">C (中等)</option>
                    <option value="D" data-i18n="pattern_rank_d">D (较低)</option>
                </select>
                <select id="patternDirection">
                    <option value="" data-i18n="pattern_direction_all">全部方向</option>
                    <option value="bullish" data-i18n="pattern_direction_bullish">看涨 ↑</option>
                    <option value="bearish" data-i18n="pattern_direction_bearish">看跌 ↓</option>
                </select>
            </div>
            <!-- Ranking filters (hidden by default) -->
            <div id="rankingFilters" class="row" style="margin-top:6px;display:none">
                <span style="font-size:11px;color:var(--text-secondary)" data-i18n="ranking_compare">对比</span>
                <select id="rankingCompare">
                    <option value="" data-i18n="ranking_prev">上一快照</option>
                    <option value="5m" data-i18n="ranking_5m">5分钟</option>
                    <option value="15m" data-i18n="ranking_15m">15分钟</option>
                    <option value="30m" data-i18n="ranking_30m">30分钟</option>
                    <option value="1h" data-i18n="ranking_1h">1小时</option>
                    <option value="6h" data-i18n="ranking_6h">6小时</option>
                    <option value="24h" data-i18n="ranking_24h">24小时</option>
                </select>
                <span style="font-size:11px;color:var(--text-secondary)" data-i18n="ranking_sort">排序</span>
                <select id="rankingSort">
                    <option value="default" data-i18n="ranking_sort_default">默认</option>
                    <option value="rank" data-i18n="ranking_sort_rank">排名</option>
                    <option value="growth" data-i18n="ranking_sort_growth">增长%</option>
                </select>
                <span style="font-size:11px;color:var(--text-secondary)" data-i18n="ranking_sort_order">顺序</span>
                <select id="rankingSortOrder">
                    <option value="asc" data-i18n="ranking_order_asc">正序</option>
                    <option value="desc" data-i18n="ranking_order_desc">倒序</option>
                </select>
                <button id="rankingRefresh" type="button" data-i18n="btn_refresh">刷新</button>
            </div>
        </div>
        <div class="row" style="margin-top:6px;justify-content:space-between">
            <div class="tabs">
                <button class="tab active" data-view="signals" data-i18n="tab_signals">信号</button>
                <button class="tab" data-view="patterns" data-i18n="tab_patterns">形态</button>
                <button class="tab" data-view="volume" data-i18n="tab_volume">成交额</button>
                <button class="tab" data-view="trades" data-i18n="tab_trades">成交笔数</button>
            </div>
            <div id="hint" class="hint" data-i18n="hint_signals">信号: -/-</div>
        </div>
    </div>
    <!-- 宽屏多面板容器 (PC widescreen mode) -->
    <div id="multiPanelContainer" class="multi-panel-container">
        <!-- 信号面板 -->
        <div class="panel signal-panel">
            <div class="panel-header">
                <span class="panel-title" data-i18n="panel_signals">信号</span>
                <span class="panel-count" id="signalPanelCount">0</span>
            </div>
            <div id="signalNewBannerWide" class="new-signal-banner" aria-live="polite">
                <div class="banner-left">
                    <span class="pulse-dot"></span>
                    <span id="signalNewTextWide" class="banner-text">-</span>
                </div>
                <button id="signalNewApplyWide" type="button" class="banner-btn">-</button>
            </div>
            <div id="wideSignalScroll" class="panel-scroll clusterize-scroll">
                <div id="wideSignalList" class="clusterize-content"></div>
            </div>
        </div>
        <!-- 成交额面板 -->
        <div class="panel volume-panel">
            <div class="panel-header">
                <span class="panel-title" data-i18n="panel_volume">成交额</span>
                <span class="panel-count" id="volumePanelCount">0</span>
            </div>
            <div class="panel-filters">
                <select id="wideVolumeCompare" class="panel-select">
                    <option value="" data-i18n="ranking_prev">上一快照</option>
                    <option value="5m" data-i18n="ranking_5m">5分钟</option>
                    <option value="15m" data-i18n="ranking_15m">15分钟</option>
                    <option value="30m" data-i18n="ranking_30m">30分钟</option>
                    <option value="1h" data-i18n="ranking_1h">1小时</option>
                </select>
                <select id="wideVolumeSort" class="panel-select">
                    <option value="default" data-i18n="ranking_sort_default">默认</option>
                    <option value="rank" data-i18n="ranking_sort_rank">排名</option>
                    <option value="growth" data-i18n="ranking_sort_growth">增长%</option>
                </select>
                <select id="wideVolumeSortOrder" class="panel-select">
                    <option value="asc" data-i18n="ranking_order_asc">正序</option>
                    <option value="desc" data-i18n="ranking_order_desc">倒序</option>
                </select>
            </div>
            <div id="wideVolumeScroll" class="panel-scroll clusterize-scroll">
                <div id="wideVolumeList" class="clusterize-content"></div>
            </div>
        </div>
        <!-- 成交笔数面板 -->
        <div class="panel trades-panel">
            <div class="panel-header">
                <span class="panel-title" data-i18n="panel_trades">成交笔数</span>
                <span class="panel-count" id="tradesPanelCount">0</span>
            </div>
            <div class="panel-filters">
                <select id="wideTradesCompare" class="panel-select">
                    <option value="" data-i18n="ranking_prev">上一快照</option>
                    <option value="5m" data-i18n="ranking_5m">5分钟</option>
                    <option value="15m" data-i18n="ranking_15m">15分钟</option>
                    <option value="30m" data-i18n="ranking_30m">30分钟</option>
                    <option value="1h" data-i18n="ranking_1h">1小时</option>
                </select>
                <select id="wideTradesSort" class="panel-select">
                    <option value="default" data-i18n="ranking_sort_default">默认</option>
                    <option value="rank" data-i18n="ranking_sort_rank">排名</option>
                    <option value="growth" data-i18n="ranking_sort_growth">增长%</option>
                </select>
                <select id="wideTradesSortOrder" class="panel-select">
                    <option value="asc" data-i18n="ranking_order_asc">正序</option>
                    <option value="desc" data-i18n="ranking_order_desc">倒序</option>
                </select>
            </div>
            <div id="wideTradesScroll" class="panel-scroll clusterize-scroll">
                <div id="wideTradesList" class="clusterize-content"></div>
            </div>
        </div>
    </div>
    <!-- 滚动列表区域 (mobile/tablet mode) -->
    <div class="scroll-area">
        <div class="scroll-content">
            <div id="signalNewBanner" class="new-signal-banner" aria-live="polite">
                <div class="banner-left">
                    <span class="pulse-dot"></span>
                    <span id="signalNewText" class="banner-text">-</span>
                </div>
                <button id="signalNewApply" type="button" class="banner-btn">-</button>
            </div>
            <div id="signalScroll" class="clusterize-scroll">
                <div id="signalList" class="clusterize-content"></div>
            </div>
            <div id="patternScroll" class="clusterize-scroll" style="display:none">
                <div id="patternList" class="clusterize-content"></div>
            </div>
            <div id="rankingScroll" class="clusterize-scroll" style="display:none">
                <div id="rankingList" class="clusterize-content"></div>
            </div>
        </div>
    </div>
    <!-- Pattern Detail Modal -->
    <div id="patternModal" class="pattern-modal" style="display:none">
        <div class="pattern-modal-content">
            <div class="modal-header">
                <span id="modalSymbol" class="symbol"></span>
                <span id="modalPatternName" class="pattern-name"></span>
                <button class="close-btn" onclick="hidePatternModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="stat-row">
                    <span class="label" data-i18n="modal_direction">方向</span>
                    <span id="modalDirection" class="value"></span>
                </div>
                <div class="stat-row">
                    <span class="label" data-i18n="modal_up_prob">上涨概率</span>
                    <span id="modalUpPct" class="value"></span>
                    <div class="bar">
                        <div id="modalUpBar" class="fill up"></div>
                    </div>
                </div>
                <div class="stat-row">
                    <span class="label" data-i18n="modal_down_prob">下跌概率</span>
                    <span id="modalDownPct" class="value"></span>
                    <div class="bar">
                        <div id="modalDownBar" class="fill down"></div>
                    </div>
                </div>
                <div class="stat-row">
                    <span class="label" data-i18n="modal_efficiency">效率等级</span>
                    <span id="modalEfficiency" class="value"></span>
                </div>
                <div class="stat-row">
                    <span class="label" data-i18n="modal_confidence">置信度</span>
                    <span id="modalConfidence" class="value"></span>
                </div>
                <div class="stat-row">
                    <span class="label" data-i18n="modal_source">来源</span>
                    <span id="modalSource" class="value"></span>
                </div>
                <div class="stat-row">
                    <span class="label" data-i18n="modal_detected">发现时间</span>
                    <span id="modalDetectedAt" class="value"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button id="modalKlineBtn" class="btn-kline" data-i18n="btn_kline">K线</button>
                <button id="modalTradeBtn" class="btn-trade" data-i18n="btn_trade">交易</button>
                <button id="modalFilterBtn" class="btn-filter" data-i18n="btn_filter">筛选</button>
            </div>
        </div>
    </div>
    <!-- 操作菜单 -->
    <div id="actionMenu" class="action-menu">
        <div class="action-menu-item" data-action="trade" data-i18n="action_jump_trade">🚀 跳转交易</div>
        <div class="action-menu-item" data-action="pivots" data-i18n="action_pivot_levels">📊 枢轴点位</div>
        <div class="action-menu-item" data-action="position_long" data-i18n="action_position_long">📈 做多仓位</div>
        <div class="action-menu-item" data-action="position_short" data-i18n="action_position_short">📉 做空仓位</div>
        <div class="action-menu-item" data-action="kline" data-i18n="action_kline_preview">K线预览</div>
        <div class="action-menu-item" data-action="copy" data-i18n="action_copy_symbol">📋 复制币种</div>
        <div class="action-menu-item" data-action="filter" data-i18n="action_filter_symbol">🔍 筛选币种</div>
        <div class="action-menu-item" data-action="signals" style="display:none" data-i18n="action_show_signals">📊 查看信号
        </div>
    </div>
    <!-- Pivot Preview Modal -->
    <div id="pivotModal" class="pattern-modal" style="display:none">
        <div class="pattern-modal-content" style="width:280px">
            <div class="modal-header">
                <span id="pivotModalSymbol" class="symbol"></span>
                <span class="pattern-name" data-i18n="pivot_levels_title">枢轴点位</span>
                <button class="close-btn" onclick="hidePivotModal()">&times;</button>
            </div>
            <div class="modal-body" style="padding:8px 12px">
                <div class="pivot-period-toggle">
                    <button class="pivot-period-btn active" data-period="1d" onclick="switchPivotPeriod('1d')"
                        data-i18n="pivot_period_day">日线</button>
                    <button class="pivot-period-btn" data-period="1w" onclick="switchPivotPeriod('1w')"
                        data-i18n="pivot_period_week">周线</button>
                </div>
                <div id="pivotLevelsList" class="pivot-levels-list"></div>
            </div>
        </div>
    </div>
    <!-- Position Calculator Modal -->
    <div id="positionModal" class="pattern-modal" style="display:none">
        <div class="position-modal-content">
            <div class="modal-header">
                <span id="positionSymbol" class="symbol"></span>
                <span class="pattern-name" data-i18n="position_title">仓位计算</span>
                <button class="close-btn" onclick="hidePositionModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="position-form">
                    <div class="position-row">
                        <span class="position-label" data-i18n="position_direction">方向</span>
                        <div class="position-segment" id="positionSide">
                            <button type="button" data-side="long" class="active" data-i18n="position_long">做多</button>
                            <button type="button" data-side="short" data-i18n="position_short">做空</button>
                        </div>
                    </div>
                    <div class="position-row">
                        <span class="position-label" data-i18n="position_leverage">杠杆</span>
                        <div class="position-field">
                            <input id="positionLeverage" type="number" class="input-sm" min="1" step="1" value="20"
                                inputmode="numeric" />
                            <span class="position-unit">x</span>
                        </div>
                    </div>
                    <div class="position-row">
                        <span class="position-label" data-i18n="position_level">参考点位</span>
                        <div class="position-field">
                            <select id="positionLevelSelect"></select>
                            <input id="positionLevelCustom" type="number" class="input-sm" placeholder="自定义价"
                                data-i18n-placeholder="position_custom_price" style="display:none"
                                inputmode="decimal" />
                        </div>
                    </div>
                    <div class="position-hint" id="positionDiff">-</div>
                    <div class="position-row">
                        <span class="position-label" data-i18n="position_offset">偏移%</span>
                        <input id="positionOffset" type="number" class="input-sm" min="-20" step="0.1" value="0"
                            inputmode="decimal" />
                    </div>
                    <div class="position-row">
                        <span class="position-label" data-i18n="position_stop_group">止损</span>
                        <div class="position-field dual">
                            <div class="position-sub">
                                <input id="positionStopPct" type="number" class="input-sm" min="0" step="0.1"
                                    data-i18n-placeholder="position_stop_pct" inputmode="decimal" />
                                <span class="position-unit">%</span>
                            </div>
                            <div class="position-sub">
                                <input id="positionStopPrice" type="number" class="input-sm" min="0" step="0.0001"
                                    data-i18n-placeholder="position_stop_price" inputmode="decimal" />
                            </div>
                        </div>
                    </div>
                    <div class="position-row">
                        <span class="position-label" data-i18n="position_max_loss">最大亏损</span>
                        <div class="position-field">
                            <input id="positionMaxLoss" type="number" class="input-sm" min="0" step="1" value="10"
                                inputmode="decimal" />
                            <span class="position-unit">USDT</span>
                        </div>
                    </div>
                    <div class="position-row">
                        <span class="position-label" data-i18n="position_take_group">止盈</span>
                        <div class="position-field dual">
                            <div class="position-sub">
                                <input id="positionTakeProfit" type="number" class="input-sm" min="0" step="1" value=""
                                    data-i18n-placeholder="position_take_profit" inputmode="decimal" />
                                <span class="position-unit">USDT</span>
                            </div>
                            <div class="position-sub">
                                <input id="positionTakePrice" type="number" class="input-sm" min="0" step="0.0001"
                                    data-i18n-placeholder="position_take_price" inputmode="decimal" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="position-summary">
                    <div class="stat-row">
                        <span class="label" data-i18n="position_entry">开仓价</span>
                        <span id="positionEntry" class="value copyable">-</span>
                    </div>
                    <div class="stat-row">
                        <span class="label" data-i18n="position_stop">止损价</span>
                        <span id="positionStop" class="value copyable">-</span>
                    </div>
                    <div class="stat-row">
                        <span class="label" data-i18n="position_take">止盈价</span>
                        <span id="positionTake" class="value">-</span>
                    </div>
                    <div class="stat-row">
                        <span class="label" data-i18n="position_take_amount">止盈收益</span>
                        <span id="positionTakeAmount" class="value">-</span>
                    </div>
                    <div class="stat-row">
                        <span class="label" data-i18n="position_risk">风险距离</span>
                        <span id="positionRisk" class="value">-</span>
                    </div>
                    <div class="stat-row">
                        <span class="label" data-i18n="position_size">仓位大小</span>
                        <span id="positionSize" class="value">-</span>
                    </div>
                    <div class="stat-row">
                        <span class="label" data-i18n="position_notional">数量</span>
                        <span id="positionNotional" class="value">-</span>
                    </div>
                    <div class="stat-row">
                        <span class="label" data-i18n="position_margin">保证金</span>
                        <span id="positionMargin" class="value">-</span>
                    </div>
                </div>
                <div class="position-actions">
                    <div class="position-api">
                        <span class="position-label" data-i18n="position_api">API</span>
                        <span id="positionApiStatus" class="api-status">-</span>
                    </div>
                    <div class="position-buttons">
                        <button id="positionApiBtn" type="button" class="btn-filter"
                            data-i18n="btn_api_config">API</button>
                        <button id="positionOrderBtn" type="button" class="btn-trade"
                            data-i18n="btn_place_order">下单</button>
                    </div>
                </div>
                <div id="positionOrderStatus" class="position-status" style="display:none"></div>
                <div id="positionError" class="position-error" style="display:none"></div>
            </div>
        </div>
    </div>
    <!-- API Key Modal -->
    <div id="apiModal" class="pattern-modal" style="display:none">
        <div class="position-modal-content">
            <div class="modal-header">
                <span class="pattern-name" data-i18n="api_title">API 设置</span>
                <button class="close-btn" onclick="hideApiModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="position-form">
                    <div class="position-row">
                        <span class="position-label" data-i18n="api_key_label">API Key</span>
                        <input id="apiKeyInput" type="text" class="input-sm" autocomplete="off" placeholder="-" />
                    </div>
                    <div class="position-row">
                        <span class="position-label" data-i18n="api_secret_label">Secret</span>
                        <input id="apiSecretInput" type="password" class="input-sm" autocomplete="off"
                            placeholder="-" />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="apiSaveBtn" class="btn-trade" data-i18n="btn_api_save">保存</button>
                <button id="apiClearBtn" class="btn-filter" data-i18n="btn_api_clear">清除</button>
            </div>
        </div>
    </div>
    <!-- Ranking Detail Modal -->
    <div id="rankingModal" class="pattern-modal" style="display:none">
        <div class="pattern-modal-content" style="width:340px;max-height:80vh">
            <div class="modal-header">
                <span id="rankingModalSymbol" class="symbol"></span>
                <span class="pattern-name" data-i18n="ranking_history_title">排名历史</span>
                <button class="close-btn" onclick="hideRankingModal()">&times;</button>
            </div>
            <div class="modal-body" style="padding:12px;overflow-y:auto;max-height:60vh">
                <div id="rankingModalCurrent" class="ranking-modal-current"></div>
                <div class="ranking-chart-section">
                    <div class="chart-title" data-i18n="chart_volume_rank">成交额排名（24h）</div>
                    <canvas id="rankingChartVolume" width="300" height="80"></canvas>
                </div>
                <div class="ranking-chart-section">
                    <div class="chart-title" data-i18n="chart_trades_rank">成交笔数排名（24h）</div>
                    <canvas id="rankingChartTrades" width="300" height="80"></canvas>
                </div>
                <div class="ranking-chart-section">
                    <div class="chart-title" data-i18n="chart_price_change">价格变化（24h）</div>
                    <canvas id="rankingChartPrice" width="300" height="80"></canvas>
                </div>
            </div>
            <div class="modal-footer">
                <button id="rankingModalKlineBtn" class="btn-kline" data-i18n="btn_kline">K线</button>
                <button id="rankingModalTradeBtn" class="btn-trade" data-i18n="btn_trade">交易</button>
                <button id="rankingModalFilterBtn" class="btn-filter" data-i18n="btn_filter">筛选</button>
            </div>
        </div>
    </div>
    <!-- Kline Preview Modal -->
    <div id="klineModal" class="kline-modal" style="display:none">
        <div class="kline-modal-content">
            <div class="modal-header">
                <span id="klineSymbol" class="symbol"></span>
                <span class="pattern-name" id="klineIntervalLabel" data-i18n="kline_title">K线预览</span>
                <button class="close-btn" onclick="hideKlineModal()">&times;</button>
            </div>
            <div class="kline-toolbar">
                <div class="kline-title">
                    <span data-i18n="kline_interval">周期</span>
                    <span id="klineIntervalText" class="tag">-</span>
                </div>
                <div id="klineIntervals" class="kline-intervals"></div>
            </div>
            <div class="kline-chart">
                <canvas id="klineCanvas"></canvas>
                <div id="klineLoading" class="kline-loading"></div>
            </div>
            <div class="kline-footer">
                <div id="klineMeta" class="kline-meta">-</div>
                <div id="klineHint" class="kline-hint" data-i18n="kline_click_load">点击时间轴加载</div>
            </div>
        </div>
    </div>
    <!-- Toast -->
    <div id="toast" class="toast"></div>
    <!-- 底部系统信息栏 -->
    <div class="footer-stats" id="footerStats">
        <div class="stat-group">
            <div class="stat-item">
                <span class="stat-label" data-i18n="footer_sse">SSE</span>:
                <span class="stat-value" id="ftSSE">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label" data-i18n="footer_goroutines">协程</span>:
                <span class="stat-value" id="ftGoroutines">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label" data-i18n="footer_heap">堆内存</span>:
                <span class="stat-value" id="ftHeap">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label" data-i18n="footer_symbols">币种</span>:
                <span class="stat-value" id="ftSymbols">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label" data-i18n="footer_signals">信号</span>:
                <span class="stat-value" id="ftSignals">-</span>
            </div>
        </div>
        <div class="stat-group">
            <div class="stat-item">
                <span class="stat-label" data-i18n="footer_uptime">运行时长</span>:
                <span class="stat-value" id="ftUptime">-</span>
            </div>
            <div class="stat-item version" id="ftVersion">-</div>
            <button id="recalcHeight" class="footer-reload" type="button" data-i18n="btn_recalc_height">重算高度</button>
        </div>
    </div>
    <!-- Clusterize.js -->
    <script src="https://cdn.bootcdn.net/ajax/libs/clusterize.js/0.19.0/clusterize.min.js"></script>
    <script src="/static/app.js"></script>
</body>

</html>